function isNumber(a){return!isNaN(parseFloat(a))&&isFinite(a)}function min(a,b){return a<=b?a:b}function max(a,b){return a>=b?a:b}function ifnull(a,b){return void 0===a||null===a?b:a}function forPairs(a,b){var c=[];for(var d in this)(b||this.hasOwnProperty(d))&&c.push(a.call(this,this[d],d));return c}function filter(a){var b=this.length;if("function"!=typeof a)throw new TypeError;for(var d=(arguments[1],[]),e=0;e<b;e++)if(e in this){var g=a.call(this,this[e]);g&&d.push(this[e])}return d}function unlisten(a,b,c,d){return a.removeEventListener&&a.removeEventListener(b,c,!!d),listeners.splice(listeners.indexOf([a,b,c,!!d]),1),c}function get(a){switch(ifnull(a.match(/^(?:\.)|(?:#)|(?:_)/),[""])[0]){case".":return document.getElementsByClass(a.replace(/^\./,""));case"#":return document.getElementById(a.replace(/^#/,""));case"_":default:return document.getElementsByTagName(a.replace(/^_/,""))}throw"Inaccessible code section accessed"}function text(a){return document.createTextNode(a)}function entity(a){return document.createEntityReference(a)}function node(a,b){var c=[].slice.call(arguments,2).reverse(),d=document.createElement(a);for(b=b?b.reverse():[];0!=b.length;){var e=b.pop(),f=b.pop();d.setAttribute(e,f)}for(;0!=c.length;){var g=c.pop();g instanceof Array?g.forEach(function(a){d.appendChild(a)}):g instanceof String?d.innerHTML=g:d.appendChild(g)}return nodeEvents.forEach(function(a){a[2],listen(d,a[0],a[1])}),d}function px(a){return a.toString()+"px"}function hide(a){return a.style.visibility="hidden"}function show(a){return a.style.visibility="visible"}function xy(a){if(void 0===a.offsetParent)throw"Legacy browser does not support javascript";for(var b=[0,0];a;a=a.offsetParent)b[0]+=a.offsetLeft,b[1]+=a.offsetTop;return b}function toHtml(){return void 0===this?text("&lt;undefined&gt;"):this instanceof HTMLElement?this:this instanceof String?text(this):this instanceof Number?text(this.toString()):this instanceof Array?node.apply(this,["ul",[]].concat(this.forEach(function(a){return node("li",[],a.toHtml())}))):this instanceof Object?node.apply(this,["dl",[]].concat(this.forEach(function(a,b){return[node("dt",[],b.toHtml()),node("dd",[],a.toHtml())]}))):void text(this.toString())}function inlinePopUp(a,b,c){alert(c),a=void 0===a?text("{undefined}"):a.toHtml(),b=void 0!==b?b:"position: absolute; top: 4em; right: 5em; border: 1px solid black; background-color: lightblue; color: black; width: 40em; height: 40em; padding: 0em; overflow: auto; height: 10em; max-height: 90%;";var d,e,f=gensym("popup");return d=node("div",["id",f,"class","popup","style",b],node("div",["style","height: 100%; width: 100%; overflow: auto;"],node("div",["style","width: 100%; height: 85%; /*border: 1px solid black;*/ top: 1em; margin: 1em;"],a),node("div",["style","width: 100%; height: 100%; text-align: center;"],e=node("button",["onclick",'this.blur(); hide(get("#'+f+'"));',"style","margin-left: auto; margin-right: auto; width: auto; height: auto; text-align: center; margin-top: 1em; margin-bottom: 1em; position: absolute; bottom: 1em;"+(c?" display: none;":"")],text("Close"))))),get("body")[0].appendChild(d),e.parent.removeChild(e),d}function help(a){var b=ajax("https://www.zip2tax.info/z2t_BackOffice/Research/z2t_ResearchOperations_operate.asp?op="+a,function(a){this.result.children[0].children[0].innerHTML=a,this.result.style.visibility="visible"}),c=["research-operations","help-add-jurisdiction"].indexOf(a)>=0;return b.result=inlinePopUp(c?"Loading...":a,"{position: fixed; top: 4em; right: 5em; border: 1px solid blue; background: lightblue url('<%=strPathIncludes%>help/HelpBackground.jpg') repeat scroll left top; color: black; width: 20em; height: 20em; padding: 0em; font-size: 2em; visibility: hidden;}"),c&&(b.result.style.width="auto",b.result.style.maxWidth="90%",b.result.style.right="5%",b.result.style.height="40em;",b.result.maxHeight="90%",b.result.style.top="5%"),b.send(),b}function ajaxDefaultError(a){switch(this.status){case 0:return void inlinePopUp(node("div",[],node("h1",["style","font-size: 1.5em; font-weight: bold;"],text("Unreachable URL")),node("br"),text(this.url)));default:var b,c=inlinePopUp(c=node("div",[],node("h1",["style","font-size: 1.5em; font-weight: bold;"],text(this.status.toString()+": "+this.statusText)),node("div",[],b=node("div"))));return b.innerHTML=this.responseText,c.style.width="auto",c.style.maxWidth="90%",c.style.height="auto",void(c.style.maxHeight="90%")}}function ajaxChange(a){try{switch(this.readyState){case 4:switch(this.status){case 200:this.fn.call(this,this.responseText);break;default:return void this.error.call(this,this.responseText)}}return}catch(a){return void alert(a)}}function ajaxDefaultFn(a){inlinePopUp(node("div"),a)}function ajax(a,b,c){var d=new XMLHttpRequest;return d.open("GET",a,!0),d.onreadystatechange=ajaxChange,d.fn=void 0===b?ajaxDefaultFn:b,d.error=void 0===c?ajaxDefaultError:c,d.url=a,d}var forEach=function(a){var b=this.length;if("function"!=typeof a)throw new TypeError;for(var c=[],d=0;d<b;d++)c.push(a.call(this[d],this[d]));return c},types=[Object,HTMLCollection,NodeList,Array];for(var collection in types)types[collection].prototype.forEach=forPairs,types[collection].prototype.filter=filter;document.getElementsByClass=function(a){return document.getElementsByTagName("*").filter(function(b){return b.className.split(" ").filter(function(b){return b==a}).length>0})};var listeners=[],listen=function(){function a(a){listeners.filter(function(b){return a.target==b[0]&&a.type==b[1]}).forEach(function(b){return b[2](a)})}return function(c,d,e,f){return listeners.indexOf([c,d,e,!!f])>-1?"Event handler already installed":(c.addEventListener?c.addEventListener(d,e,!!f):c["on"+d]!=a&&(c["on"+d]&&(listeners.push=[c,d,c["on"+d],!!f]),c["on"+d]=a),listeners.push([c,d,e,!!f]),e)}}(),nodeEvents=[],css=function(){var a="undefined"!=typeof window?window.getComputedStyle:function(){return element.currentStyle};return function(b){return a(b)}}(),gensym=function(){var a=0;return function(c){return a+=1,(void 0===c?"G":c+"-")+a.toString()}}();Object.prototype.toHtml=toHtml;
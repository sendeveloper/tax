function clickLogin(){return""==document.getElementById("z2tLogin").value&&""==document.getElementById("z2tPassword").value?void document.getElementById("z2tLogin").focus():""==document.getElementById("z2tLogin").value?(document.getElementById("z2tLogin").focus(),void alert("Please enter your User Name")):""==document.getElementById("z2tPassword").value?(document.getElementById("z2tPassword").focus(),void alert("Please enter your Password")):void(window.document.location=URL+"?lname="+document.getElementById("z2tLogin").value+"&pass="+document.getElementById("z2tPassword").value)}function clickLogout(){window.document.location=URL+"?logout=true"}window.onerror=function(a,b,c){return document.getElementById("loading_animation").innerHTML="",!1},YUI({skin:"night"}).use("node","node-base","event","event-valuechange","io","json","handlebars","datatype","panel",function(a){function s(){var b=!1;return userName&&z2tp&&(b=!0),a.one("#z2tLogin")&&(b=!1),b}function t(a,b){return new RegExp("^\\d{"+b+"}$").test(a)}function u(a,b){!0===b?a.hasClass(h)&&a.removeClass(h):a.hasClass(h)||a.addClass(h)}function v(b,c,d){var d=d||"",e=a.one(b);!0===c?e.hasClass(g)&&e.removeClass(g):e.hasClass(g)||e.addClass(g),e.set("title",d)}function w(){var b=!1,c="ZIP Code",e=a.one(j),f=e.previous("label"),g=e.get("value");if(""!==g){var h=!isNaN(parseFloat(g))&&isFinite(g);f.hasClass(i)||f.addClass(i),5==g.length&&h&&(b=!0)}else b=!0,f.hasClass(i)&&f.removeClass(i);v(j,b,b?c:"ZIP code must be exactly 5 numbers."),u(d,b);var l=y();return b||l||a.one(j).focus(!0),b}function x(){var b=!1,d=a.one(k),e=d.previous("label"),f=d.get("value"),g=parseInt(f);return""===f?(b=!0,e.hasClass(i)&&e.removeClass(i)):(e.hasClass(i)||e.addClass(i),b=t(g,4)),v(k,b,b?"+ 4":"Plus 4 should be exactly 4 numbers for more accurate results."),b}function y(){var b=!1,c=a.one(l),e=c.previous("label"),f=a.one(m),h=f.previous("label"),k=a.one(n),p=k.previous("label"),q=a.one(j),r=c.get("value"),s=f.get("value"),t=k.get("value"),v=a.one(o).get("value");return""!==r&&""!==t&&""!==v?(e.hasClass(i)||e.addClass(i),p.hasClass(i)||p.addClass(i),b=!0,u(d,b)):((q.hasClass(g)||0===q.get("value").length)&&(b=!1,u(d,b)),""===r?e.hasClass(i)&&e.removeClass(i):e.hasClass(i)||e.addClass(i),""===s?h.hasClass(i)&&h.removeClass(i):h.hasClass(i)||h.addClass(i),""===t?p.hasClass(i)&&p.removeClass(i):p.hasClass(i)||p.addClass(i)),b}function z(){var b=!1,d=a.one(p),f=d.previous("label"),g=d.get("value");return b=new RegExp("^\\d*(\\.\\d{1,2})?$").test(g),v(d,b,b?"Enter Dollar Amount":"Dollar amounts may only contain decimal values,no dollar signs or other characters, please."),a.one("#current-result")&&u(e,b),""===g?f.hasClass(i)&&f.removeClass(i):f.hasClass(i)||f.addClass(i),b}function A(){return canSubmit=!1,d.hasClass(h)?y()?canSubmit=!0:w()&&(canSubmit=!0):canSubmit=!0,canSubmit}function E(){var b=this.getAttribute("id"),c=b.replace("Tab","Body"),d="selected",e="unselected",f="tab-headings",g="tab-body",h=a.one("."+f+" > div."+d),i=a.one("."+g+" > div."+d);h.getAttribute("id")===b||(a.one("#"+b).removeClass(e),a.one("#"+c).removeClass(e),a.one("#"+b).addClass(d),a.one("#"+c).addClass(d),h.removeClass(d),i.removeClass(d),h.addClass(e),i.addClass(e));var k=a.one("#resultGoogleMap");k.setStyle("visibility","lookupTab"===this.getAttribute("id")?k.mapVisibility:"hidden")}function F(){a.one(l).set("value","").focus(),a.one(m).set("value","").focus(),a.one(n).set("value","").focus(),a.one(o).set("value","").focus(),a.one(p).set("value","").focus(),a.one(k).set("value","").focus(),a.one(j).set("value","").focus(),u(d,!1),u(e,!1),w(),x()}function G(){try{var b=a.one("#cur-granularity");H(),Q(),b&&(b.set("value",""),b.setAttribute("visibility","hidden"))}catch(a){throw alert(a),a}}function H(){b.setHTML("Jurisdictional accuracy depends on input. At minimum, enter a ZIP code. For finer resolution, <br>enter ZIP+4.  A full street address with city and state is required for Spot-On&trade; granularity.")}function I(){if(!e.hasClass(h)){var b=parseFloat(a.one("#inputAmt").get("value")),d=b,f=a.one("#actual-use-tax");if(a.one("#dollar-amount-sales-tax").setHTML(a.Number.format(b,q)),a.one("#dollar-amount-use-tax").setHTML(a.Number.format(b,q)),b){var g=parseFloat(a.one("#actual-sales-tax").getHTML())/100;if(g){var i=b*g;i&&a.one("#sales-tax").setHTML(a.Number.format(i,q)),b+i}else a.one("#sales-tax").setHTML(a.Number.format(0,q));if(f){var j=parseFloat(f.getHTML())/100;if(j){var k=b*j;k&&(a.one("#use-tax").setHTML(a.Number.format(k,q)),d=b+k)}else a.one("#use-tax").setHTML(a.Number.format(0,q));staxval=Math.round(100*d)/100,a.one("#total-sale-use-tax").setHTML(a.Number.format(staxval,q))}a.one("#total-sale-sales-tax").setHTML(a.Number.format(staxval,q))}}}function J(){var d="N/A",e=a.one("#cur-granularity");e&&(e=e.get("value"),"PinPoint"===e?("SpotOn.png",d="Spot-On"):"ZIP+4"===e?("ZIP+4.png",d="ZIP+4"):"ZIP code"===e&&("ZIP-code.png",d="ZIP code")),a.one("#resultLevel").setHTML(d),a.one("#address-resolution").removeClass("None")}function K(){var b=this.getHTML(),c="#"+this.get("id")+"break_out",d=a.one(c);if("Show"===b?(d.show(),this.setHTML("Hide")):(d.hide(),this.setHTML("Show")),a.one("#all-other")){var e=a.all("div.break-all"),f=a.all("button.break-all");if(e&&f){var g=f.size(),h=0,i=0;f.each(function(){"Show"===this.getHTML()?h+=1:i+=1}),g===h?"Expand All"!==a.one("#all-other").getHTML()&&a.one("#all-other").setHTML("Expand All"):g===i&&"Collapse All"!==a.one("#all-other").getHTML()&&a.one("#all-other").setHTML("Collapse All")}}}function L(){var b=a.all("div.break-all"),c=a.all("button.break-all");"Expand All"===this.getHTML()?(b.show(),c.setHTML("Hide"),this.setHTML("Collapse All")):(b.hide(),c.setHTML("Show"),this.setHTML("Expand All"))}function M(){var b=a.all("input.urgent-message"),c="";if(b.each(function(a){""!==a.get("value")&&(c=c+"<br>"+a.get("value"))}),a.Lang.isValue(c)&&""!==c){var d=new a.Panel({contentBox:a.Node.create('<div id="dialog" />'),bodyContent:'<div class="message-overlay icon-warn">'+c+"</div>",width:410,zIndex:6,centered:!0,modal:!0,render:".overlay",visible:!1,buttons:{footer:[{name:"proceed",label:"OK",action:"onOK"}]}});d.onOK=function(a){a.preventDefault(),this.hide(),this.callback&&this.callback(),this.callback=!1},d.show()}}function N(a){var b=a.split(/[.:]/);parseInt(b[0],10);return(b[1]?parseInt(b[1],10):0)+"."+(b[2]?parseInt(b[2],10):0)}function O(b){var c="",d=b.indexOf("."),e="",f="";if(-1!==d)if(e=b.substr(d,b.length),f=b.substr(0,d),0!==(e=a.Number.parse(e))){e=e.toString();var h=e.split("."),i=h[0],j=h[1],k=i+j,l=Math.pow(10,j.length),m=P(k,l);l/=m,k/=m,c="0"===f?k+"/"+l:f+" "+k+"/"+l}else c=f;else c=f;return c}function P(a,b){return 0==b?a:P(b,a%b)}function Q(){a.one("#big_result").setHTML(""),a.one("#detail_link").setHTML(""),a.one("#resultGoogleMap").setHTML(""),a.one("#resultGoogleMap").setStyle("visibility","hidden"),a.one("#resultGoogleMap").mapVisibility="hidden"}function R(b){var c=b.indexOf("."),d="",e="",f="",g="";-1!==c?(d=b.substr(c,b.length),e=b.substr(0,c),d=a.Number.parse(d),0!==d?(f=parseInt(e)+d,g=O(b)):(f=e,g=e)):(f=b,g=b);var h=parseFloat(f).toFixed(4)+'<span class="percent">%</span>',i='<span class="fraction">('+g+'<span class="percent">%</span>)</span>';a.one("#big_result").setHTML(h+"<br/>"+i),a.one("#detail_link").setHTML('<a href="#detail_results">Detailed Results</a>')}function S(b,d,e){Q();var f=a.JSON.parse(d.responseText),g=f.z2tLookup.addressInfo.addresses,h=g.length;if(h>0){for(var i=[],j=0;j<h;j++)0===j?f.z2tLookup.addressInfo.primary=g[j]:i[j-1]=g[j];f.z2tLookup.addressInfo.others=i}a.Handlebars.registerHelper("stripes",function(){var a="odd";return function(){return a="even"===a?"odd":"even"}}());var k=D(f.z2tLookup);if(c.setHTML(k),h>0){a.one("#current-result")&&a.one("#current-result").delegate("click",K,"button.sub-breakout"),a.one("#all-other")&&a.one("#all-other").on("click",L),J();var l="",m="",n="";Q(),a.Object.hasKey(f.z2tLookup.addressInfo,"primary")?a.Object.hasKey(f.z2tLookup.addressInfo.primary,"address")&&a.Object.hasKey(f.z2tLookup.addressInfo.primary.address,"salesTax")&&(R(f.z2tLookup.addressInfo.primary.address.salesTax.rateInfo.taxRate),l=f.z2tLookup.addressInfo.primary.address.zipCode,m=parseFloat(f.z2tLookup.addressInfo.primary.address.Latitude),n=parseFloat(f.z2tLookup.addressInfo.primary.address.Longitude)):a.one("#big_result").setHTML("");if(z()&&I(),""!==l&&""!==m&&""!==n){var p=a.one("#resultGoogleMap").getDOMNode();mapSetup(p,l,m,n),a.one("#resultGoogleMap").setStyle("visibility","visible"),a.one("#resultGoogleMap").mapVisibility="visible"}}M(),a.one("#loading_animation").setHTML("")}function T(b,d,e){a.one("#loading_animation").setHTML(""),a.one("#big_result").setHTML(""),c.setHTML('<span id="errorMessage" class="error-response">There was an error with the request: '+d.status+" "+d.statusText+"</span>"),Q(),respData=[]}function U(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}function V(){if(!d.hasClass(h)){var b=a.one(l).get("value"),c=a.one(m).get("value"),e=a.one(n).get("value"),f=a.one(o).get("value"),g=a.one(j).get("value"),i=a.one(k).get("value");""!==i&&(g=g+"-"+i);var p={username:userName,password:z2tp,addressLine1:b,addressLine2:c,city:e,state:f,zip:g};p=U(p);var q="/Website/pagesTaxRates/Online-Lookups/z2t_ajax.asp?"+p;a.io(q,{method:"GET",headers:{"Content-Type":"text/plain"},timeout:15e3,on:{success:S,failure:T}});a.one("#loading_animation").setHTML(r)}}var b=a.one("#resultsArea"),c=a.one("#resultsArea"),d=a.one("#get-rate-button"),e=a.one("#calculate-button"),f=a.one("#clear-button"),g="invalid",h="disabled",i="placeholder-hidden",j="#inputZip",k="#inputZip4",l="#inputAddr1",m="#inputAddr2",n="#inputCity",o="#inputState",p="#inputAmt",q={prefix:"$",decimalPlaces:2,thousandsSeparator:","},r='Loading... <img src="/Website/Images/loading_anim.gif" height="16" width="16" />';if(a.one("#JavaScriptTest").setHTML("Pass"),a.one(j).on("valueChange",w),a.one(j).on("key",function(){A()&&V()},"enter"),a.one(k).on("valueChange",function(){x()}),a.one(k).on("key",function(){A()&&V()},"enter"),a.one(l).on("valueChange",y),a.one(l).on("key",function(){A()&&V()},"enter"),a.one(m).on("valueChange",y),a.one(m).on("key",function(){A()&&V()},"enter"),a.one(n).on("valueChange",y),a.one(n).on("key",function(){A()&&V()},"enter"),a.one(o).on("change",y),a.one(o).on("valueChange",y),a.one(o).on("key",function(){A()&&V()},"enter"),a.one(p).on("valueChange",z),a.one(p).on("key",function(){z()&&a.one("#sales-tax")&&I()},"enter"),w(),x(),z(),s()){a.one("#lookupBody").set("title",""),H(),a.one(j).focus(!0);var C=a.one("#z2tLookup").getHTML(),D=a.Handlebars.compile(C);a.Handlebars.registerHelper("getFractionForDecimal",O),a.Handlebars.registerHelper("timeStringToFloat",N),a.Handlebars.registerHelper("non_zero_value",function(b){return b=a.Number.parse(b),0===b?"display:none":""}),a.Handlebars.registerHelper("alpha_only",function(a){return a.split(/[^a-z"]+/i).join("_")}),a.Handlebars.registerHelper("non_empty",function(b,c){var d=a.Lang.isObject(c)?b:c,e="";return a.Lang.isValue(b)&&0!==b&&""!==b&&""!==b&&"0"!==b&&(e=d),e})}else a.one("#lookupBody").set("title","You must have an account and be logged in to use these features.  Call 866-492-8494 to inquire about a free trial.");a.one("#lookupTab").on("click",E),a.one("#zipTab").on("click",E),a.one("#zipFourTab").on("click",E),a.one("#spotOnTab").on("click",E),a.one("#linkTab1").on("click",a.bind(E,a.one("#zipTab"))),a.one("#linkTab2").on("click",a.bind(E,a.one("#zipFourTab"))),a.one("#linkTab3").on("click",a.bind(E,a.one("#spotOnTab"))),f.on("click",F),f.on("click",G),e.on("click",I),a.on("click",V,"#get-rate-button")});
